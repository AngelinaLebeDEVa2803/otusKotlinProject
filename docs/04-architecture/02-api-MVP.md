# API Desk-Sharing приложения SmartOffice, упрощенный вариант

Для MVP будем считать, что система работает в рамках определенного здания и определенного филиала (сущности Filial и Building не рассматриваем). 
Будем описывать ключевую сущность Booking. Функционал для бронирования переговорных в рамках MVP не делаем.
Апи для просмотра своей команды и аналитики также не рассматриваем.

### 1. Сущности

**Бронирование (Booking)**

| Поле | Тип | Бизнес-описание | Пример значения |
| :--- | :--- | :--- | :--- |
| `bookingId` | string | Уникальный идентификатор брони | `"book_abc123"` |
| `userId` | string | ID пользователя, создавшего бронь | `"user_789"` |
| `floorId` | string | ID этажа, на котором находится место | `"floor_2"` |
| `roomId` | string | ID помещения, в котором находится место | `"room_418"` |
| `workspaceId` | string | ID забронированного места | `"ws_floor2_a205"` |
| `startTime` | ISO 8601 | Дата и время начала брони | `"2024-09-20T09:00:00Z"` |
| `endTime` | ISO 8601 | Дата и время окончания брони | `"2024-09-20T17:00:00Z"` |
| `status` | string | Статус: `"active"`, `"cancelled"`, `"completed"` | `"active"` |

### 2. Бизнес-функции (методы)

**Управление бронированиями**

6.  **`POST /api/v1/bookings`** - Создание нового бронирования
    *   *Бизнес-правило:* Пользователь не может забронировать уже занятое место на выбранный промежуток времени.
    *   *Ограничения:* Максимум 3 активных брони на пользователя вперед.
    *   *Тело запроса:* `{ userId: "123", floorId: "floor_2", roomId: "room_418", workspaceId: "ws_floor2_a205", startTime: "2024-09-20T09:00:00Z", endTime: "2024-09-20T18:00:00Z" }`

7.  **`GET /api/v1/bookings/{bookingId}`** - Получение информации о бронировании

8.  **`GET /api/v1/bookings`** - Получение списка своих бронирований
    *   *Параметры:* `?userId=user_789&date=2024-09-20`
    *   *Бизнес-логика:* Возвращает бронирования пользователя на указанную дату.

9.  **`PATCH /api/v1/bookings/{bookingId}`** - Обновление бронирования (например, изменение времени)
    *   *Бизнес-правило:* Изменение возможно не позднее 1 часа до начала брони.

10. **`DELETE /api/v1/bookings/{bookingId}`** - Отмена бронирования
    *   *Бизнес-правило:* Отмена возможна в любое время до начала брони.


### 3. Бизнес-правила

1.  **Конфликт бронирований:** Система гарантирует, что одно и то же место не может быть забронировано двумя пользователями на пересекающиеся промежутки времени.
2.  **Продолжительность брони:** Максимальная продолжительность одного бронирования переговорной комнаты - 4 часа.
3.  **"Офисный день":** Бронирование на целый день (с 9:00 до 18:00) имеет приоритет и не может быть отменено автоматически из-за более коротких броней.
4.  **Автоматическое освобождение:** Если пользователь не отметился на месте в течение 30 минут после начала брони, система может автоматически освободить место (опциональная настройка офиса).

### 4. Бизнес-метрики успеха

1.  **Точность данных:** Актуальность статуса места на карте должна составлять ≥ 99.9% (задержка обновления ≤ 5 секунд).
2.  **Удовлетворенность пользователей:** ≥ 90% пользователей должны оценивать процесс бронирования как "простой и intuitive" (через встроенные опросы NPS/CSAT).
3.  **Ограничения частоты запросов (Rate Limiting):**
    *   Анонимные пользователи: 10 запросов/мин
    *   Авторизованные пользователи: 60 запросов/мин
    *   Администраторы: 200 запросов/мин
